<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Последовательное умножение на 2</title>
</head>

<body>
  <script>
    (function run() {
      const texts = {
        ru: {
          title: 'Последовательное умножение на 2',
          chooseLang: 'Выберите язык: en / ru',
          iterations: 'Введите количество итераций (целое число ≥ 1)',
          startValue: 'Введите начальное число (целое число)',
          invalidIterations: 'Некорректное количество итераций.',
          invalidStartValue: 'Некорректное начальное число.',
          result: (value, iterations, result) =>
            `Результат последовательного умножения числа ${value} на 2 (${iterations} итераций): ${result}`
        },
        en: {
          title: 'Repeated multiplication by 2',
          chooseLang: 'Choose language: en / ru',
          iterations: 'Enter number of iterations (integer ≥ 1)',
          startValue: 'Enter initial number (integer)',
          invalidIterations: 'Invalid number of iterations.',
          invalidStartValue: 'Invalid initial number.',
          result: (value, iterations, result) =>
            `Result of multiplying ${value} by 2 (${iterations} iterations): ${result}`
        }
      };

      while (true) {
        const rawLang = prompt('Choose language / Выберите язык: en / ru', 'en');
        if (rawLang === null) break;

        const language = rawLang.trim().toLowerCase();
        const t = texts[language] || texts.en;

        document.title = t.title;
        document.documentElement.lang = (language === 'ru' ? 'ru' : 'en');

        let iterations = null;

        while (true) {
          const iterationsInput = prompt(t.iterations, 14);
          if (iterationsInput === null) break;

          const n = Number(iterationsInput);
          if (!Number.isInteger(n) || n < 1) {
            alert(t.invalidIterations);
            continue;
          }

          iterations = n;
          break;
        }

        if (iterations === null) continue;

        let startValueStr = null;

        while (true) {
          const startValueInput = prompt(t.startValue, 5);
          if (startValueInput === null) break;

          const s = startValueInput.trim();
          if (!/^-?\d+$/.test(s)) {
            alert(t.invalidStartValue);
            continue;
          }

          startValueStr = s;
          break;
        }

        if (startValueStr === null) continue;

        const startValue = BigInt(startValueStr);

        // Формула: startValue * 2^(iterations-1)
        const multiplier = 2n ** BigInt(iterations - 1);
        const result = startValue * multiplier;

        alert(t.result(startValueStr, iterations, result.toString()));
      }
    })();
  </script>
</body>

</html>